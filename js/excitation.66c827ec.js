(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["excitation"],{"06f9":function(t,e,o){},"34ef":function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"excitation"},[o("contentBg",{ref:"contentBg"}),o("contentTitle",[o("div",{staticClass:"text"},[o("span",[t._v("助力FAR-OKExChain生态发展")]),o("span",[t._v("赢取丰厚FAR奖励")])])]),o("div",{staticClass:"excitationContent"},[o("div",{staticClass:"myRecommend"},[o("div",[o("div",[o("span",[t._v("您的生态推荐码：")]),o("span",[t._v(t._s(t.codeNumber))])]),o("van-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.codeNumber,expression:"codeNumber",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],nativeOn:{click:function(t){t.stopPropagation()}}},[t._v("点击复制")])],1),o("div",[o("div",[o("span",[t._v("生态推荐人地址：")]),o("span",[t._v(t._s(t.recommerShotCode))])]),t.isBind?o("van-button",{directives:[{name:"clipboard",rawName:"v-clipboard:copy",value:t.recommerShotCode,expression:"recommerShotCode",arg:"copy"},{name:"clipboard",rawName:"v-clipboard:success",value:t.onCopySuccess,expression:"onCopySuccess",arg:"success"},{name:"clipboard",rawName:"v-clipboard:error",value:t.onCopyError,expression:"onCopyError",arg:"error"}],nativeOn:{click:function(t){t.stopPropagation()}}},[t._v("点击复制")]):o("van-button",{on:{click:function(e){t.show=!0}}},[t._v("点击绑定")])],1)]),o("div",{staticClass:"excitationContentBottom"},[o("div",{staticClass:"myRecommendData"},[o("div",[o("span",[t._v(t._s(t.networkPower)+" $")]),o("span",[t._v("当前全网生态激励算力")])]),o("div",[o("span",[t._v(t._s(t.myPower)+" $")]),o("span",[t._v("当前您的生态激励算力")])]),o("div",[o("span",[t._v(t._s(t.getExcitation)+" FAR")]),o("span",[t._v("您已获得的生态激励")])])]),o("redGreenBut",{nativeOn:{click:function(e){return t.doDrawMyTotalAwards(e)}}},[t._v("领取生态激励奖励")])],1)]),o("van-overlay",{attrs:{show:t.show},on:{click:function(e){t.show=!t.show}}},[o("div",{staticClass:"register",on:{click:function(t){t.stopPropagation()}}},[o("div",[o("div",[o("div",{staticClass:"title"},[t._v("生态推荐地址绑定")]),o("div",{staticClass:"input"},[o("span",[t._v("请输入需绑定的生态推荐码或对应地址")]),o("div",[o("input",{directives:[{name:"model",rawName:"v-model",value:t.other,expression:"other"}],attrs:{type:"text",placeholder:"生态推荐码或对应地址"},domProps:{value:t.other},on:{input:[function(e){e.target.composing||(t.other=e.target.value)},function(e){t.other=t.other.replace(/[\W]/g,"")}]}})])]),o("p",[t._v(" 请确认您输入的生态推荐码正确无误，单个地址只能绑定一次推荐码、推荐地址，绑定后无法修改，请您仔细确认。 ")])]),o("div",{staticClass:"but"},[o("redGreenBut",{nativeOn:{click:function(e){t.show=!t.show}}},[t._v("取消")]),o("redGreenBut",{nativeOn:{click:function(e){return t.bind(e)}}},[t._v("确认无误,绑定")])],1)])])])],1)},r=[],a=(o("a9e3"),o("d3b7"),o("25f0"),o("6b75"));function i(t){if(Array.isArray(t))return Object(a["a"])(t)}o("a4d3"),o("e01a"),o("d28b"),o("a630"),o("3ca3"),o("ddb0");function s(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}var c=o("06c5");function d(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return i(t)||s(t)||Object(c["a"])(t)||d()}o("96cf");var l=o("1da1"),m={data:function(){return{show:!1,other:"",codeNumber:"******",recommerShotCode:"",isBind:!1,maxLength:8,myPower:0,drawed:0,networkPower:0,getExcitation:0,lockAmount:0}},watch:{show:function(){this.other=""}},methods:{init:function(){var t=this;this.show=!1,this.$contracts.Relation.methods.recommendInfo().call({from:this.$address},(function(e,o){var n=t.$web3.utils.hexToString(o.shotCode);t.codeNumber=n.length?n:"******";var r=t.$web3.utils.hexToString(o.recommerShotCode);t.recommerShotCode=r.length?r:"暂无",t.isBind=Boolean(n.length)})),this.$contracts.PowerMine.methods.doDraw().call({from:this.$address},(function(e,o){console.log(o),t.getExcitation=parseInt(o.toString().fromWei()).toNum()})),this.$contracts.PowerMine.methods.mineInfo(this.$address).call({from:this.$address},(function(e,o){t.myPower=parseInt(o.myPower.fromWei()).toNum(),t.networkPower=parseInt(o.networkPower.fromWei()).toNum()}))},bind:function(){var t=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var o,n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(o=u("abcdefghijklmnopqrstuvwxyz0123456789"),n="",t.other.length==t.maxLength||t.$web3.utils.isAddress(t.other)){e.next=6;break}return e.abrupt("return",t.$toast.fail("请输入生态推荐码"));case 6:if(!(t.other.length>t.maxLength)||t.$web3.utils.isAddress(t.other)){e.next=8;break}return e.abrupt("return",t.$toast.fail("请输入生态推荐码"));case 8:for(a=0;a<t.maxLength;a++)n+=o[t.randomNum()];if(t.other.length!=t.maxLength){e.next=17;break}return e.next=12,t.$contracts.Relation.methods.shortCodeToAddress(t.$web3.utils.stringToHex(t.other.toLocaleUpperCase())).call();case 12:if(r=e.sent,"0x0000000000000000000000000000000000000000"!=r){e.next=15;break}return e.abrupt("return",t.$toast.fail("生态推荐码不存在"));case 15:e.next=23;break;case 17:return r=t.other,e.next=20,t.$contracts.Relation.methods.addressToShortCode(r).call();case 20:if(i=e.sent,t.$web3.utils.hexToString(i).length){e.next=23;break}return e.abrupt("return",t.$toast.fail("生态推荐人地址不存在"));case 23:t.$contracts.Relation.methods.addRelationEx(r,t.$web3.utils.stringToHex(n.toLocaleUpperCase())).send({from:t.$address}).on("transactionHash",(function(e){t.$loading()})).on("receipt",(function(e){t.$loading(),t.$nextTick((function(){t.$toast.success("绑定成功"),t.init()}))})).on("error",console.error);case 24:case"end":return e.stop()}}),e)})))()},doDrawMyTotalAwards:function(){var t=this;if(!Number(this.getExcitation.fromNum()))return this.$toast.fail("暂无可领取的生态激励");this.$contracts.PowerMine.methods.doDraw().send({from:this.$address}).on("transactionHash",(function(e){t.$loading()})).on("receipt",(function(e){t.$loading(),t.$nextTick((function(){t.$toast.success("领取成功"),t.init()}))})).on("error",console.error)},randomNum:function(){return parseInt(36*Math.random()+0,10)},onCopySuccess:function(){this.$toast.fail("复制成功")},onCopyError:function(){this.$toast.fail("复制失败")}},mounted:function(){this.$contracts&&this.init()}},h=m,p=h,v=(o("ed2a"),o("4e16"),o("2877")),f=Object(v["a"])(p,n,r,!1,null,"5bf175f0",null);e["default"]=f.exports},"4e16":function(t,e,o){"use strict";o("7bfc")},"7bfc":function(t,e,o){},ed2a:function(t,e,o){"use strict";o("06f9")}}]);