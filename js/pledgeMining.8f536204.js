(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pledgeMining"],{"0ba0":function(t,e,n){},"15c1":function(t,e,n){"use strict";n("9a7a")},"24d5":function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"pledgeMining"},[i("contentBg",{ref:"contentBg"}),i("contentTitle",[i("div",{staticClass:"text"},[i("span",[t._v(t._s(t.$t("xuan-ze-nin-xi-wang-de-fang-shi-zhi-ya-usdtokt")))]),i("span",[t._v(t._s(t.$t("huo-wei-farusdt-ti-gong-liu-dong-xing-zhuan-qu-far")))])])]),t.$isMobile()?t._e():i("redGreenBut",{class:"en"==t.$i18n.locale||"rn"==t.$i18n.locale?"en":"",nativeOn:{click:function(e){return t.$router.push("/pledgeDetail")}}},[t._v(t._s(t.$t("zhi-ya-wa-kuang-shou-yi-xiang-qing"))+" ")]),i("div",{staticClass:"pledgeMiningContent"},[i("div",{staticClass:"pledgeMiningSelect"},[i("div",{class:{active:0==t.active},on:{click:function(e){t.active=0,t.$refs.contentBg.getOffsetDate()}}},[i("span",[t._v(t._s(t.$t("dan-bi-zhi-ya-wa-kuang")))]),i("div")]),i("div",{class:{active:1==t.active},on:{click:function(e){t.active=1,t.$refs.contentBg.getOffsetDate()}}},[i("span",[t._v(t._s(t.$t("liu-dong-xing-zhi-ya-wa-kuang")))]),i("div")]),t.$isMobile()?i("img",{attrs:{src:n("a1c4")},on:{click:function(e){return t.$router.push("/pledgeDetail")}}}):t._e()]),i("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active,expression:"active == 0"}],staticClass:"singleCurrency"},t._l(t.singleCurrency,(function(e,s){return i("div",{key:s,class:{green:0===s,blue:1===s}},[i("div",[i("div",[i("img",{attrs:{src:n("9e01")("./"+(1==s?"bnb":"usdt")+".png")}}),i("span",[t._v(t._s(e.title))])]),i("span",[t._v(t._s(t.$t("huo-qu-far-wa-kuang-jiang-li")))])]),i("div",[i("div",[i("div",[i("span",[t._v(t._s(e.apys)+" %")]),i("span",[t._v("APY")])]),i("div",[i("span",[t._v(t._s(e.tvls)+" $")]),i("span",[t._v("TVL")])]),i("div",[i("span",[t._v(t._s(e.amounts)+" "+t._s(e.type))]),i("span",[t._v(t._s(t.$t("wo-de-zhi-ya")))])])]),i("redGreenBut",{nativeOn:{click:function(n){return t.pledgeMining(e.type)}}},[t._v(t._s(t.$t("wa-kuang")))])],1)])})),0),i("div",{directives:[{name:"show",rawName:"v-show",value:1==t.active,expression:"active == 1"}],staticClass:"fluidity"},[t.list.length?i("div",{staticClass:"green"},[i("div",[i("div",[t._m(0),i("span",[t._v(t._s(t.$t("ti-gong-farusdt-liu-dong-xing")))])]),i("span",[t._v(t._s(t.$t("huo-qu-far-wa-kuang-jiang-li")))])]),i("div",[i("div",[i("div",[i("span",[t._v(t._s(t.list[2].apys)+" %")]),i("span",[t._v("APY")])]),i("div",[i("span",[t._v(t._s(t.list[2].tvls)+" $")]),i("span",[t._v("TVL")])]),i("div",[i("span",[t._v(t._s(t.list[2].amounts)+" "+t._s(t.list[2].type))]),i("span",[t._v(t._s(t.$t("wo-de-zhi-ya")))])])]),i("redGreenBut",{nativeOn:{click:function(e){return t.pledgeMining(t.list[2].type)}}},[t._v(t._s(t.$t("wa-kuang")))])],1)]):t._e()])])],1)},s=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",[i("img",{attrs:{src:n("f6f3")}}),i("img",{attrs:{src:n("0f62")}})])}],a=(n("4de4"),n("4160"),n("159b"),n("ade3")),o=(n("96cf"),n("1da1")),r=Object(a["a"])({data:function(){return{active:0,list:[],singleCurrency:[],isStart:!1}},computed:{singleCurrency:function(){}},mounted:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$contracts.PledgeMine.methods.isStart().call();case 2:t.isStart=e.sent,t.$contracts.PledgeMine.methods.getMyInfos().call({from:t.$address},function(){var e=Object(o["a"])(regeneratorRuntime.mark((function e(n,i){var s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t.list=[],s=[t.$t("zhi-ya-usdt"),t.$t("zhi-ya-okt"),t.$t("ti-gong-farusdt-liu-dong-xing")],a=["USDT","BNB","LP"],e.next=5,t.$currentTime().then();case 5:e.sent,o=["ether","ether","ether"],i.apys.forEach((function(e,n){t.list.push({index:n,title:s[n],type:a[n],apys:i.apys[n],amounts:parseInt(i.amounts[n].fromWei(o[n])).toNum(),tvls:i.tvls[n]})})),t.singleCurrency=t.list.filter((function(t){return t.index<2})),t.$nextTick((function(){t.$refs.contentBg.width=document.querySelector(".pledgeMining").offsetWidth,t.$refs.contentBg.height=document.querySelector(".pledgeMining").offsetHeight,setTimeout((function(){t.$refs.contentBg.height=document.querySelector(".pledgeMining").offsetHeight}),200)}));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}());case 4:case"end":return e.stop()}}),e)})))()},pledgeMining:function(t){if(!this.isStart)return this.$toast.fail(this.$t("isStart"));this.$router.push({path:"/pledgeMiningChild",query:{type:t}})}}},"mounted",(function(){this.$contracts&&this.init()})),c=r,u=c,l=(n("a11f"),n("2877")),d=Object(l["a"])(u,i,s,!1,null,"4c788e4c",null);e["default"]=d.exports},"487b":function(t,e,n){"use strict";n("e4eb")},5035:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pledgeMiningChild"},[i("contentBg",{ref:"contentBg"}),i("contentTitle",[i("div",{staticClass:"text"},[i("span",[t._v(t._s(t.$t("cun-ru-type-zhuan-qu-far",[t.type])))])])]),i("div",{staticClass:"pledgeMiningChildContent"},[i("div",[i("img",{attrs:{src:n("f6f3")}}),i("div",{staticClass:"text"},[i("span",[t._v(t._s(t.earnings)+" FAR")]),i("span",[t._v(t._s(t.$t("yi-zhuan-qu-far")))])]),i("redGreenBut",{nativeOn:{click:function(e){t.extract=!0}}},[t._v(t._s(t.$t("ti-qu")))])],1),i("div",["LP"==t.type?i("div",{staticClass:"lp"},[i("img",{attrs:{src:n("f6f3")}}),i("img",{attrs:{src:n("0f62")}})]):i("div",{staticClass:"img"},[i("img",{attrs:{src:n("9e01")("./"+t.type.toLowerCase()+".png")}})]),i("div",{staticClass:"text"},[i("span",[t._v(t._s("LP"==t.type?"FAR-USDT-LP":"FAR-"+t.type))]),i("span",[t._v(t._s(t.$t("huo-de-far-wa-kuang-jiang-li")))])]),i("div",{staticClass:"but"},[i("redGreenBut",{nativeOn:{click:function(e){t.show=!0}}},[t._v(t._s(t.$t("zhi-ya")))]),i("redGreenBut",{nativeOn:{click:function(e){t.release=!0}}},[t._v(t._s(t.$t("jie-ya")))])],1)])]),i("van-overlay",{attrs:{show:t.show},on:{click:function(e){t.show=!1,t.depositAmount=""}}},[i("div",{staticClass:"deposit",on:{click:function(t){t.stopPropagation()}}},[i("div",[i("div",[i("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("cun-ru-type-zhuan-qu-far1",[t.type]))+" ")]),i("div",{staticClass:"input"},[i("span",[t._v(t._s(t.$t("cun-ru-type",[t.type])))]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.depositAmount,expression:"depositAmount"}],attrs:{type:"number",placeholder:t.$t("cun-bi-shu-liang")},domProps:{value:t.depositAmount},on:{input:function(e){e.target.composing||(t.depositAmount=e.target.value)}}}),i("div",[i("span",[t._v(t._s(t.type))]),i("div"),i("span",{on:{click:function(e){t.depositAmount=t.walletBalance.fromNum()}}},[t._v(t._s(t.$t("zui-da")))])])])]),i("span",[t._v(t._s(t.$t("qian-bao-ke-yong"))+" "+t._s(t.walletBalance)+" "+t._s(t.type))]),i("p",[t._v(" "+t._s(t.$t("qing-que-bao-qian-bao-zhong-you-zu-gou-de-type-yi-que-bao-lian-shang-jiao-yi-wan-cheng",[t.type]))+" ")])]),i("div",{staticClass:"but"},["BNB"!=t.type?i("redGreenBut",{nativeOn:{click:function(e){return t.authorize(e)}}},[t._v(t._s(t.$t("shou-quan")))]):t._e(),i("redGreenBut",{nativeOn:{click:function(e){return t.deposit(e)}}},[t._v(t._s(t.$t("que-ren")))])],1)])])]),i("van-overlay",{attrs:{show:t.release},on:{click:function(e){t.release=!1,t.releaseAmount=""}}},[i("div",{staticClass:"release",on:{click:function(t){t.stopPropagation()}}},[i("div",[i("div",[i("p",[t._v(" "+t._s(t.$t("nin-dang-qian-yu-type-zhi-ya-wa-kuang-yi-zhi-ya-de-type-wei",[t.type,t.type]))+" ")]),i("div",{staticClass:"pledgeBalance"},[i("span",[t._v(t._s(t.pledgeBalance))]),i("span",[t._v(t._s(t.type))])]),i("div",{staticClass:"input"},[i("span",[t._v(t._s(t.$t("jie-ya-type",[t.type])))]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.releaseAmount,expression:"releaseAmount"}],attrs:{type:"number",placeholder:t.$t("jie-ya-shu-liang")},domProps:{value:t.releaseAmount},on:{input:function(e){e.target.composing||(t.releaseAmount=e.target.value)}}}),i("div",[i("span",[t._v(t._s(t.type))]),i("div"),i("span",{on:{click:function(e){t.releaseAmount=t.pledgeBalance.fromNum()}}},[t._v(t._s(t.$t("zui-da")))])])])]),i("span",[t._v(t._s(t.$t("zui-da-ke-jie-ya"))+" "+t._s(t.pledgeBalance)+" "+t._s(t.type))])]),i("div",[i("redGreenBut",{nativeOn:{click:function(e){return t.doUnPledge(e)}}},[t._v(t._s(t.$t("jie-chu-zhi-ya")))]),i("p",[t._v(" "+t._s(t.$t("zhu-jie-chu-zhi-ya-ji-biao-shi-nin-tui-chu-nin-suo-xuan-fenede-zhi-ya-wa-kuang-bu-zai-ji-suan-zhi-ya-wa-kuang-shou-yi"))+" ")])],1)])])]),i("van-overlay",{attrs:{show:t.extract},on:{click:function(e){t.extract=!1}}},[i("div",{staticClass:"extract",on:{click:function(t){t.stopPropagation()}}},[i("div",[i("div",[i("p",[t._v(t._s(t.$t("nin-dang-qian-yi-zhuan-qu-de-far")))]),i("div",{staticClass:"pledgeBalance"},[i("span",[t._v(t._s(t.earnings))]),i("span",[t._v("FAR")])])]),i("div",t._l(t.list,(function(e,n){return i("div",{key:n},[i("div",[i("span",[t._v(t._s(e.acquire)+" FAR")]),i("span",[t._v(t._s(t.$t("huo-de")))])]),i("div",[i("span",[t._v(t._s(e.punish)+" FAR")]),i("span",[t._v(t._s(t.$t("wa-kuang-xiao-hao")))])]),i("redGreenBut",{nativeOn:{click:function(e){return t.doFreeze(n)}}},[t._v(t._s(Number(e.lockDays)?t.$t("suo-ding-itemlockdays-ri",[e.lockDays]):t.$t("li-ji-ling-qu")))])],1)})),0)])])])],1)},s=[],a=(n("4160"),n("a9e3"),n("b680"),n("d3b7"),n("25f0"),n("3ca3"),n("159b"),n("ddb0"),n("3835")),o=n("5530"),r={data:function(){return{show:!1,release:!1,extract:!1,type:this.$route.query.type,depositAmount:"",releaseAmount:"",pledgeBalance:0,earnings:0,list:[],farAuthorize:0,isRegister:""}},computed:Object(o["a"])(Object(o["a"])({},Vuex.mapState(["balance"])),{},{walletBalance:function(){return"USDT"===this.type?this.balance.usdt:"BNB"===this.type?this.balance.eth:this.balance.lp},typeId:function(){return"USDT"===this.type?0:"BNB"===this.type?1:2},decimal:function(){return"ether"}}),mounted:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this;this.show=!1,this.release=!1,this.extract=!1,this.depositAmount="",this.releaseAmount="",this.$contracts.Relation.methods.recommendInfo().call({from:this.$address},(function(e,n){var i=t.$web3.utils.hexToString(n.shotCode);t.isRegister=!!i.length})),Promise.all([this.$contracts.PledgeMine.methods.getMyInfos().call({from:this.$address}),this.$contracts.PledgeMine.methods.freezeable(this.typeId).call({from:this.$address})]).then((function(e){var n=Object(a["a"])(e,2),i=n[0],s=n[1];console.log(s),t.pledgeBalance=parseInt(i.amounts[t.typeId].fromWei(t.decimal)).toNum(),t.earnings=s.fromWei().toFixed(6).toNum(),t.$contracts.PledgeMine.methods.getClaimConditions().call({from:t.$address},(function(e,n){console.log(n),t.list=[];var i=t.earnings.fromNum().toWei();console.log(i+"-----earnings"),n.lockDays.forEach((function(e,s){t.list.push({acquire:(t.BN(i).mul(t.BN(n.acquireRates[s])).toString().fromWei()/100).toFixed(6),punish:(t.BN(i).mul(t.BN(n.punishRates[s])).toString().fromWei()/100).toFixed(6),lockDays:n.lockDays[s]/86400})})),console.log(t.list)}))}));var e="USDT"===this.type?"PsdToken":"FarUsdtLpToken";0!==this.typeId&&2!==this.typeId||this.$contracts[e].methods.allowance(this.$address,this.$contracts.PledgeMine._address).call({from:this.$address},(function(e,n){t.farAuthorize=n.fromWei()}))},doFreeze:function(t){var e=this;if(!Number(this.earnings.fromNum()))return this.$toast.fail(this.$t("zhi-ya-shu-liang-wei-0"));this.$contracts.PledgeMine.methods.doFreeze(this.typeId,t).send({from:this.$address}).on("transactionHash",(function(t){e.$loading()})).on("receipt",(function(t){e.$loading(),e.$nextTick((function(){e.$toast.success(e.$t("ling-qu-cheng-gong")),e.init()}))})).on("error",console.error)},doUnPledge:function(){var t=this,e=Number(this.releaseAmount),n=Number(this.pledgeBalance.fromNum());if(!e)return this.$toast.fail(this.$t("qing-shu-ru-cun-bi-shu-liang"));if(e>n)return this.$toast.fail(this.$t("zhi-ya-shu-liang-bu-zu"));var i={from:this.$address};this.$contracts.PledgeMine.methods.doUnPledge(this.typeId,this.releaseAmount.toWei(this.decimal)).send(i).on("transactionHash",(function(e){t.$loading()})).on("receipt",(function(e){t.$loading(),t.$nextTick((function(){t.$toast.success(t.$t("jie-ya-cheng-gong")),t.init()}))})).on("error",console.error)},deposit:function(){var t=Number(this.depositAmount),e=Number(this.walletBalance.fromNum()),n=Number(this.farAuthorize);return t?t>e?this.$toast.fail(this.$t("yuebu-zu")):this.isRegister?t>n&&1!=this.typeId?this.$toast.fail(this.$t("shou-quanedu-bu-zu")):void this.doPledge(this.typeId):this.$toast.fail(this.$t("qing-xian-bang-ding-tui-jian-ren")):this.$toast.fail(this.$t("qing-shu-ru-cun-bi-shu-liang"))},doPledge:function(t){var e=this;this.$contracts.PledgeMine.methods.doPledge(t,this.depositAmount.toWei()).send({from:this.$address,value:1===this.typeId?this.depositAmount.toWei():0}).on("transactionHash",(function(t){e.$loading()})).on("receipt",(function(t){e.$loading(),e.$nextTick((function(){e.$toast.success(e.$t("zhi-ya-cheng-gong")),e.init()}))})).on("error",console.error)},authorize:function(){var t=this,e="1000000000".toWei(),n="USDT"===this.type?"PsdToken":"FarUsdtLpToken";this.$contracts[n].methods.approve(this.$contracts.PledgeMine._address,e).send({from:this.$address}).on("transactionHash",(function(e){t.$loading()})).on("receipt",(function(e){t.$loading(),t.$nextTick((function(){t.$toast.success(t.$t("shou-quan-cheng-gong")),t.farAuthorize=1e9}))})).on("error",console.error)}}},c=r,u=c,l=(n("487b"),n("66c2"),n("2877")),d=Object(l["a"])(u,i,s,!1,null,"05e79576",null);e["default"]=d.exports},"66c2":function(t,e,n){"use strict";n("0ba0")},"9a7a":function(t,e,n){},a11f:function(t,e,n){"use strict";n("dad8")},dad8:function(t,e,n){},e4eb:function(t,e,n){},ff60:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"pledgeDetail"},[n("contentBg",{ref:"contentBg"}),n("contentTitle",[n("div",{staticClass:"text"},[n("span",[t._v(t._s(t.$t("wo-de-zhi-ya-shou-yi")))])])]),n("div",{staticClass:"pledgeDeailContent"},[n("div",{staticClass:"incomeBox"},[n("div",{staticClass:"incomeNum"},[n("span",[t._v(t._s(t.totalAward))]),n("span",[t._v(t._s(t.$t("ke-ling-qu-shou-yi")))])]),n("div",{staticClass:"gray"},[n("span",[t._v(t._s(t.$t("zong-zhi-ya")))]),n("span",[t._v(t._s(t.totalFreeze)+" FAR")])]),n("span",[t._v(t._s(t.$t("zhi-ya-xiang-qing")))]),n("div",{staticClass:"gray"},[n("span",[t._v(t._s(t.$t("lai-zi-usdt-ling-qu")))]),n("span",[t._v(t._s(t.usdt)+" FAR")])]),n("div",{staticClass:"gray"},[n("span",[t._v(t._s(t.$t("lai-zi-okt-ling-qu")))]),n("span",[t._v(t._s(t.okt)+" FAR")])]),n("div",{staticClass:"gray"},[n("span",[t._v(t._s(t.$t("lai-zi-lp-ling-qu")))]),n("span",[t._v(t._s(t.lp)+" FAR")])]),n("redGreenBut",{nativeOn:{click:function(e){return t.doDraw(e)}}},[t._v(t._s(t.$t("ling-qu")))])],1)])],1)},s=[],a=(n("a9e3"),n("b680"),{data:function(){return{totalFreeze:0,totalAward:0,usdt:0,okt:0,lp:0}},methods:{init:function(){var t=this;this.$contracts.PledgeMine.methods.getAwardInfo().call({from:this.$address},(function(e,n){t.totalFreeze=n.totalFreeze.fromWei().toFixed(2).toNum(),t.totalAward=n.totalAward.fromWei().toFixed(2).toNum(),t.usdt=n.awards[0].fromWei().toFixed(2).toNum(),t.okt=n.awards[1].fromWei().toFixed(2).toNum(),t.lp=n.awards[2].fromWei().toFixed(2).toNum()}))},doDraw:function(){var t=this;if(!Number(this.totalAward.fromNum()))return this.$toast.fail(this.$t("zan-wu-ke-ling-qu-shou-yi"));this.$contracts.PledgeMine.methods.doDraw().send({from:this.$address}).on("transactionHash",(function(e){t.$loading()})).on("receipt",(function(e){t.$loading(),t.$nextTick((function(){t.$toast.success(t.$t("ling-qu-cheng-gong")),t.init()}))})).on("error",console.error)}},mounted:function(){this.$contracts&&this.init()}}),o=a,r=o,c=(n("15c1"),n("2877")),u=Object(c["a"])(r,i,s,!1,null,"0ad0d3b8",null);e["default"]=u.exports}}]);