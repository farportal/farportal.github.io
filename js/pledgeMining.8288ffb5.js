(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pledgeMining"],{"15c1":function(t,e,i){"use strict";i("9a7a")},"24d5":function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("section",{staticClass:"pledgeMining"},[n("contentBg",{ref:"contentBg"}),n("contentTitle",[n("div",{staticClass:"text"},[n("span",[t._v(t._s(t.$t("xuan-ze-nin-xi-wang-de-fang-shi-zhi-ya-usdtokt")))]),n("span",[t._v(t._s(t.$t("huo-wei-farusdt-ti-gong-liu-dong-xing-zhuan-qu-far")))])])]),t.$isMobile()?t._e():n("redGreenBut",{nativeOn:{click:function(e){return t.$router.push("/pledgeDetail")}}},[t._v(t._s(t.$t("zhi-ya-wa-kuang-shou-yi-xiang-qing")))]),n("div",{staticClass:"pledgeMiningContent"},[n("div",{staticClass:"pledgeMiningSelect"},[n("div",{class:{active:0==t.active},on:{click:function(e){t.active=0,t.$refs.contentBg.getOffsetDate()}}},[n("span",[t._v(t._s(t.$t("dan-bi-zhi-ya-wa-kuang")))]),n("div")]),n("div",{class:{active:1==t.active},on:{click:function(e){t.active=1,t.$refs.contentBg.getOffsetDate()}}},[n("span",[t._v(t._s(t.$t("liu-dong-xing-zhi-ya-wa-kuang")))]),n("div")]),t.$isMobile()?n("img",{attrs:{src:i("a1c4")},on:{click:function(e){return t.$router.push("/pledgeDetail")}}}):t._e()]),n("div",{directives:[{name:"show",rawName:"v-show",value:0==t.active,expression:"active == 0"}],staticClass:"singleCurrency"},t._l(t.singleCurrency,(function(e,s){return n("div",{key:s,class:{green:0===s,blue:1===s}},[n("div",[n("div",[n("img",{attrs:{src:i("9e01")("./"+(s?"okt":"usdt")+".png")}}),n("span",[t._v(t._s(e.title))])]),n("span",[t._v(t._s(t.$t("huo-qu-far-wa-kuang-jiang-li")))])]),n("div",[n("div",[n("div",[n("span",[t._v(t._s(e.apys)+" %")]),n("span",[t._v("APY")])]),n("div",[n("span",[t._v(t._s(e.tvls)+" $")]),n("span",[t._v("TVL")])]),n("div",[n("span",[t._v(t._s(e.amounts)+" "+t._s(e.type))]),n("span",[t._v(t._s(t.$t("wo-de-zhi-ya")))])])]),n("redGreenBut",{nativeOn:{click:function(i){return t.$router.push({path:"/pledgeMiningChild",query:{type:e.type}})}}},[t._v(t._s(t.$t("wa-kuang")))])],1)])})),0),n("div",{directives:[{name:"show",rawName:"v-show",value:1==t.active,expression:"active == 1"}],staticClass:"fluidity"},[t.list.length?n("div",{staticClass:"green"},[n("div",[n("div",[t._m(0),n("span",[t._v(t._s(t.$t("ti-gong-farusdt-liu-dong-xing")))])]),n("span",[t._v(t._s(t.$t("huo-qu-far-wa-kuang-jiang-li")))])]),n("div",[n("div",[n("div",[n("span",[t._v(t._s(t.list[2].apys)+" %")]),n("span",[t._v("APY")])]),n("div",[n("span",[t._v(t._s(t.list[2].tvls)+" $")]),n("span",[t._v("TVL")])]),n("div",[n("span",[t._v(t._s(t.list[2].amounts)+" "+t._s(t.list[2].type))]),n("span",[t._v(t._s(t.$t("wo-de-zhi-ya")))])])]),n("redGreenBut",{nativeOn:{click:function(e){return t.$router.push({path:"/pledgeMiningChild",query:{type:t.list[2].type}})}}},[t._v(t._s(t.$t("wa-kuang")))])],1)]):t._e()])])],1)},s=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("img",{attrs:{src:i("f6f3")}}),n("img",{attrs:{src:i("0f62")}})])}],a=(i("4de4"),i("4160"),i("159b"),i("96cf"),i("1da1")),o={data:function(){return{active:0,list:[]}},computed:{singleCurrency:function(){return this.list.filter((function(t){return t.index<2}))}},methods:{init:function(){var t=this;this.$contracts.PledgeMine.methods.getMyInfos().call({from:this.$address},function(){var e=Object(a["a"])(regeneratorRuntime.mark((function e(i,n){var s,a,o;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return console.log(n),t.list=[],s=[t.$t("zhi-ya-usdt"),t.$t("zhi-ya-okt"),t.$t("ti-gong-farusdt-liu-dong-xing")],a=["USDT","OKT","LP"],e.next=6,t.$currentTime().then();case 6:e.sent,o=["ether","ether","ether"],n.apys.forEach((function(e,i){t.list.push({index:i,title:s[i],type:a[i],apys:n.apys[i],amounts:parseInt(n.amounts[i].fromWei(o[i])).toNum(),tvls:n.tvls[i]})})),t.$nextTick((function(){t.$refs.contentBg.width=document.querySelector(".pledgeMining").offsetWidth,t.$refs.contentBg.height=document.querySelector(".pledgeMining").offsetHeight,setTimeout((function(){t.$refs.contentBg.height=document.querySelector(".pledgeMining").offsetHeight}),200)}));case 10:case"end":return e.stop()}}),e)})));return function(t,i){return e.apply(this,arguments)}}())}},mounted:function(){this.$contracts&&this.init()}},r=o,u=r,c=(i("2e32"),i("2877")),l=Object(c["a"])(u,n,s,!1,null,"118c90a2",null);e["default"]=l.exports},"2e32":function(t,e,i){"use strict";i("7d79")},"487b":function(t,e,i){"use strict";i("e4eb")},5035:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"pledgeMiningChild"},[n("contentBg",{ref:"contentBg"}),n("contentTitle",[n("div",{staticClass:"text"},[n("span",[t._v(t._s(t.$t("cun-ru-type-zhuan-qu-far",[t.type])))])])]),n("div",{staticClass:"pledgeMiningChildContent"},[n("div",[n("img",{attrs:{src:i("f6f3")}}),n("div",{staticClass:"text"},[n("span",[t._v(t._s(t.earnings)+" FAR")]),n("span",[t._v(t._s(t.$t("yi-zhuan-qu-far")))])]),n("redGreenBut",{nativeOn:{click:function(e){t.extract=!0}}},[t._v(t._s(t.$t("ti-qu")))])],1),n("div",["LP"==t.type?n("div",{staticClass:"lp"},[n("img",{attrs:{src:i("f6f3")}}),n("img",{attrs:{src:i("0f62")}})]):n("div",{staticClass:"img"},[n("img",{attrs:{src:i("9e01")("./"+t.type.toLowerCase()+".png")}})]),n("div",{staticClass:"text"},[n("span",[t._v(t._s("LP"==t.type?"FAR-USDT-LP":"FAR-"+t.type))]),n("span",[t._v(t._s(t.$t("huo-de-far-wa-kuang-jiang-li")))])]),n("div",{staticClass:"but"},[n("redGreenBut",{nativeOn:{click:function(e){t.show=!0}}},[t._v(t._s(t.$t("zhi-ya")))]),n("redGreenBut",{nativeOn:{click:function(e){t.release=!0}}},[t._v(t._s(t.$t("jie-ya")))])],1)])]),n("van-overlay",{attrs:{show:t.show},on:{click:function(e){t.show=!1,t.depositAmount=""}}},[n("div",{staticClass:"deposit",on:{click:function(t){t.stopPropagation()}}},[n("div",[n("div",[n("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("cun-ru-type-zhuan-qu-far1",[t.type]))+" ")]),n("div",{staticClass:"input"},[n("span",[t._v(t._s(t.$t("cun-ru-type",[t.type])))]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.depositAmount,expression:"depositAmount"}],attrs:{type:"number",placeholder:t.$t("cun-bi-shu-liang")},domProps:{value:t.depositAmount},on:{input:function(e){e.target.composing||(t.depositAmount=e.target.value)}}}),n("div",[n("span",[t._v(t._s(t.type))]),n("div"),n("span",{on:{click:function(e){t.depositAmount=t.walletBalance.fromNum()}}},[t._v(t._s(t.$t("zui-da")))])])])]),n("span",[t._v(t._s(t.$t("qian-bao-ke-yong"))+" "+t._s(t.walletBalance)+" "+t._s(t.type))]),n("p",[t._v(" "+t._s(t.$t("qing-que-bao-qian-bao-zhong-you-zu-gou-de-type-yi-que-bao-lian-shang-jiao-yi-wan-cheng",[t.type]))+" ")])]),n("div",{staticClass:"but"},["OKT"!=t.type?n("redGreenBut",{nativeOn:{click:function(e){return t.authorize(e)}}},[t._v(t._s(t.$t("shou-quan")))]):t._e(),n("redGreenBut",{nativeOn:{click:function(e){return t.deposit(e)}}},[t._v(t._s(t.$t("que-ren")))])],1)])])]),n("van-overlay",{attrs:{show:t.release},on:{click:function(e){t.release=!1,t.releaseAmount=""}}},[n("div",{staticClass:"release",on:{click:function(t){t.stopPropagation()}}},[n("div",[n("div",[n("p",[t._v(" "+t._s(t.$t("nin-dang-qian-yu-type-zhi-ya-wa-kuang-yi-zhi-ya-de-type-wei",[t.type,t.type]))+" ")]),n("div",{staticClass:"pledgeBalance"},[n("span",[t._v(t._s(t.pledgeBalance))]),n("span",[t._v(t._s(t.type))])]),n("div",{staticClass:"input"},[n("span",[t._v(t._s(t.$t("jie-ya-type",[t.type])))]),n("div",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.releaseAmount,expression:"releaseAmount"}],attrs:{type:"number",placeholder:t.$t("jie-ya-shu-liang")},domProps:{value:t.releaseAmount},on:{input:function(e){e.target.composing||(t.releaseAmount=e.target.value)}}}),n("div",[n("span",[t._v(t._s(t.type))]),n("div"),n("span",{on:{click:function(e){t.releaseAmount=t.pledgeBalance.fromNum()}}},[t._v(t._s(t.$t("zui-da")))])])])]),n("span",[t._v(t._s(t.$t("zui-da-ke-jie-ya"))+" "+t._s(t.pledgeBalance)+" "+t._s(t.type))])]),n("div",[n("redGreenBut",{nativeOn:{click:function(e){return t.doUnPledge(e)}}},[t._v(t._s(t.$t("jie-chu-zhi-ya")))]),n("p",[t._v(" "+t._s(t.$t("zhu-jie-chu-zhi-ya-ji-biao-shi-nin-tui-chu-nin-suo-xuan-fenede-zhi-ya-wa-kuang-bu-zai-ji-suan-zhi-ya-wa-kuang-shou-yi"))+" ")])],1)])])]),n("van-overlay",{attrs:{show:t.extract},on:{click:function(e){t.extract=!1}}},[n("div",{staticClass:"extract",on:{click:function(t){t.stopPropagation()}}},[n("div",[n("div",[n("p",[t._v(t._s(t.$t("nin-dang-qian-yi-zhuan-qu-de-far")))]),n("div",{staticClass:"pledgeBalance"},[n("span",[t._v(t._s(t.earnings))]),n("span",[t._v("FAR")])])]),n("div",t._l(t.list,(function(e,i){return n("div",{key:i},[n("div",[n("span",[t._v(t._s(e.acquire)+" FAR")]),n("span",[t._v(t._s(t.$t("huo-de")))])]),n("div",[n("span",[t._v(t._s(e.punish)+" FAR")]),n("span",[t._v(t._s(t.$t("wa-kuang-xiao-hao")))])]),n("redGreenBut",{nativeOn:{click:function(e){return t.doFreeze(i)}}},[t._v(t._s(Number(e.lockDays)?t.$t("suo-ding-itemlockdays-ri",[e.lockDays]):t.$t("li-ji-ling-qu")))])],1)})),0)])])])],1)},s=[],a=(i("4160"),i("a9e3"),i("b680"),i("d3b7"),i("25f0"),i("3ca3"),i("159b"),i("ddb0"),i("3835")),o=i("5530"),r={data:function(){return{show:!1,release:!1,extract:!1,type:this.$route.query.type,depositAmount:"",releaseAmount:"",pledgeBalance:0,earnings:0,list:[],farAuthorize:0,isRegister:""}},computed:Object(o["a"])(Object(o["a"])({},Vuex.mapState(["balance"])),{},{walletBalance:function(){return"USDT"===this.type?this.balance.usdt:"OKT"===this.type?this.balance.eth:this.balance.lp},typeId:function(){return"USDT"===this.type?0:"OKT"===this.type?1:2},decimal:function(){return"ether"}}),mounted:function(){this.$contracts&&this.init()},methods:{init:function(){var t=this;this.show=!1,this.release=!1,this.extract=!1,this.depositAmount="",this.releaseAmount="",this.$contracts.Relation.methods.recommendInfo().call({from:this.$address},(function(e,i){var n=t.$web3.utils.hexToString(i.shotCode);t.isRegister=!!n.length})),Promise.all([this.$contracts.PledgeMine.methods.getMyInfos().call({from:this.$address}),this.$contracts.PledgeMine.methods.freezeable(this.typeId).call({from:this.$address})]).then((function(e){var i=Object(a["a"])(e,2),n=i[0],s=i[1];console.log(s),t.pledgeBalance=parseInt(n.amounts[t.typeId].fromWei(t.decimal)).toNum(),t.earnings=s.fromWei().toFixed(6).toNum(),t.$contracts.PledgeMine.methods.getClaimConditions().call({from:t.$address},(function(e,i){t.list=[];var n=t.earnings.fromNum().toWei();i.lockDays.forEach((function(e,s){t.list.push({lockDays:i.lockDays[s]/86400,punish:t.BN(n).mul(t.BN(i.punishRates[s])).div(t.BN("1".toWei("Mwei"))).toString().fromWei().toFixed(6).toNum(),acquire:t.BN(n).mul(t.BN(i.acquireRates[s])).div(t.BN("1".toWei("Mwei"))).toString().fromWei().toFixed(6).toNum()})}))}))}));var e="USDT"===this.type?"PsdToken":"FarUsdtLpToken";0!==this.typeId&&2!==this.typeId||this.$contracts[e].methods.allowance(this.$address,this.$contracts.PledgeMine._address).call({from:this.$address},(function(e,i){t.farAuthorize=i.fromWei()}))},doFreeze:function(t){var e=this;if(!Number(this.earnings.fromNum()))return this.$toast.fail(this.$t("zhi-ya-shu-liang-wei-0"));this.$contracts.PledgeMine.methods.doFreeze(this.typeId,t).send({from:this.$address}).on("transactionHash",(function(t){e.$loading()})).on("receipt",(function(t){e.$loading(),e.$nextTick((function(){e.$toast.success(e.$t("ling-qu-cheng-gong")),e.init()}))})).on("error",console.error)},doUnPledge:function(){var t=this,e=Number(this.releaseAmount),i=Number(this.pledgeBalance.fromNum());if(!e)return this.$toast.fail(this.$t("qing-shu-ru-cun-bi-shu-liang"));if(e>i)return this.$toast.fail(this.$t("zhi-ya-shu-liang-bu-zu"));var n={from:this.$address};this.$contracts.PledgeMine.methods.doUnPledge(this.typeId,this.releaseAmount.toWei(this.decimal)).send(n).on("transactionHash",(function(e){t.$loading()})).on("receipt",(function(e){t.$loading(),t.$nextTick((function(){t.$toast.success(t.$t("jie-ya-cheng-gong")),t.init()}))})).on("error",console.error)},deposit:function(){var t=Number(this.depositAmount),e=Number(this.walletBalance.fromNum()),i=Number(this.farAuthorize);return t?t>e?this.$toast.fail(this.$t("yuebu-zu")):this.isRegister?t>i&&1!=this.typeId?this.$toast.fail(this.$t("shou-quanedu-bu-zu")):void this.doPledge(this.typeId):this.$toast.fail(this.$t("qing-xian-bang-ding-tui-jian-ren")):this.$toast.fail(this.$t("qing-shu-ru-cun-bi-shu-liang"))},doPledge:function(t){var e=this;this.$contracts.PledgeMine.methods.doPledge(t,this.depositAmount.toWei()).send({from:this.$address,value:1===this.typeId?this.depositAmount.toWei():0}).on("transactionHash",(function(t){e.$loading()})).on("receipt",(function(t){e.$loading(),e.$nextTick((function(){e.$toast.success(e.$t("zhi-ya-cheng-gong")),e.init()}))})).on("error",console.error)},authorize:function(){var t=this,e="1000000000".toWei(),i="USDT"===this.type?"PsdToken":"FarUsdtLpToken";this.$contracts[i].methods.approve(this.$contracts.PledgeMine._address,e).send({from:this.$address}).on("transactionHash",(function(e){t.$loading()})).on("receipt",(function(e){t.$loading(),t.$nextTick((function(){t.$toast.success(t.$t("shou-quan-cheng-gong")),t.farAuthorize=1e9}))})).on("error",console.error)}}},u=r,c=u,l=(i("487b"),i("efb0"),i("2877")),d=Object(l["a"])(c,n,s,!1,null,"47b4f110",null);e["default"]=d.exports},"7d79":function(t,e,i){},"9a7a":function(t,e,i){},e4eb:function(t,e,i){},efb0:function(t,e,i){"use strict";i("feb0")},feb0:function(t,e,i){},ff60:function(t,e,i){"use strict";i.r(e);var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("section",{staticClass:"pledgeDetail"},[i("contentBg",{ref:"contentBg"}),i("contentTitle",[i("div",{staticClass:"text"},[i("span",[t._v(t._s(t.$t("wo-de-zhi-ya-shou-yi")))])])]),i("div",{staticClass:"pledgeDeailContent"},[i("div",{staticClass:"incomeBox"},[i("div",{staticClass:"incomeNum"},[i("span",[t._v(t._s(t.totalAward))]),i("span",[t._v(t._s(t.$t("ke-ling-qu-shou-yi")))])]),i("div",{staticClass:"gray"},[i("span",[t._v(t._s(t.$t("zong-zhi-ya")))]),i("span",[t._v(t._s(t.totalFreeze)+" FAR")])]),i("span",[t._v(t._s(t.$t("zhi-ya-xiang-qing")))]),i("div",{staticClass:"gray"},[i("span",[t._v(t._s(t.$t("lai-zi-usdt-ling-qu")))]),i("span",[t._v(t._s(t.usdt)+" FAR")])]),i("div",{staticClass:"gray"},[i("span",[t._v(t._s(t.$t("lai-zi-okt-ling-qu")))]),i("span",[t._v(t._s(t.okt)+" FAR")])]),i("div",{staticClass:"gray"},[i("span",[t._v(t._s(t.$t("lai-zi-lp-ling-qu")))]),i("span",[t._v(t._s(t.lp)+" FAR")])]),i("redGreenBut",{nativeOn:{click:function(e){return t.doDraw(e)}}},[t._v(t._s(t.$t("ling-qu")))])],1)])],1)},s=[],a=(i("a9e3"),i("b680"),{data:function(){return{totalFreeze:0,totalAward:0,usdt:0,okt:0,lp:0}},methods:{init:function(){var t=this;this.$contracts.PledgeMine.methods.getAwardInfo().call({from:this.$address},(function(e,i){console.log(i),t.totalFreeze=i.totalFreeze.fromWei().toFixed(2).toNum(),t.totalAward=i.totalAward.fromWei().toFixed(2).toNum(),t.usdt=i.awards[0].fromWei().toFixed(2).toNum(),t.okt=i.awards[1].fromWei().toFixed(2).toNum(),t.lp=i.awards[2].fromWei().toFixed(2).toNum()}))},doDraw:function(){var t=this;if(!Number(this.totalAward.fromNum()))return this.$toast.fail(this.$t("zan-wu-ke-ling-qu-shou-yi"));this.$contracts.PledgeMine.methods.doDraw().send({from:this.$address}).on("transactionHash",(function(e){t.$loading()})).on("receipt",(function(e){t.$loading(),t.$nextTick((function(){t.$toast.success(t.$t("ling-qu-cheng-gong")),t.init()}))})).on("error",console.error)}},mounted:function(){this.$contracts&&this.init()}}),o=a,r=o,u=(i("15c1"),i("2877")),c=Object(u["a"])(r,n,s,!1,null,"0ad0d3b8",null);e["default"]=c.exports}}]);