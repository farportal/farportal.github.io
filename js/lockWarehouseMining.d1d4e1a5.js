(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["lockWarehouseMining"],{"1ee8":function(t,n,i){},"2aac":function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"lockIncome"},[i("div",{staticClass:"content"},[t._m(0),t._m(1),i("redGreenBut",{nativeOn:{click:function(n){return t.income(n)}}},[t._v("锁仓收益")])],1)])},s=[function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"allIncome"},[i("span",[t._v("500.00")]),i("span",[t._v("锁仓收益/FAR")])])},function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("div",{staticClass:"incomeList"},[i("div",[i("span",[t._v("30日锁仓收益")]),i("span",[t._v("100.00 FAR")])]),i("div",[i("span",[t._v("90日锁仓收益")]),i("span",[t._v("100.00 FAR")])]),i("div",[i("span",[t._v("360日锁仓收益")]),i("span",[t._v("100.00 FAR")])])])}],o={methods:{income:function(){}}},a=o,c=a,r=(i("8e8e"),i("2877")),u=Object(r["a"])(c,e,s,!1,null,"79d0ea06",null);n["default"]=u.exports},"54a6":function(t,n,i){"use strict";i("1ee8")},5800:function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return"/myLock"==t.$route.path?i("div",{staticClass:"myLock"},[i("div",{staticClass:"container"},[t._l(t.list,(function(n,e){return i("div",{key:e,staticClass:"box"},[i("div",{staticClass:"day"},[t._v(t._s(n.title))]),t.$isMobile()?i("div",{staticClass:"divider"}):t._e(),i("div",[i("div",[i("span",[t._v(t._s(t.$t("suo-cang-can-yu-shu-liang")))]),i("div",[t._v(t._s(n.lockAmounts)+" FAR")])]),i("div",[i("span",[t._v(t._s(t.$t("yi-huo-de-suo-cang-wa-kuang-shou-yi")))]),i("div",[t._v(t._s(n.drawedEarnings)+" FAR")])]),i("div",[i("span",[t._v(t._s(t.$t("suo-cang-wa-kuang-dao-qi-shi-jian")))]),i("div",[t._v(t._s(n.times))])]),i("div",[i("span",[t._v(t._s(t.$t("ke-ling-qu-shou-yi")))]),i("div",[t._v(t._s(n.claimables)+" FAR")])]),i("div",{staticClass:"butBox"},[i("redGreenBut",{class:{visibilityHide:!n.extendible},nativeOn:{click:function(i){return t.doAddLockOnePeriod(e,n.extendible)}}},[t._v(t._s(t.$t("fu-tou")))]),i("redGreenBut",{class:{visibilityHide:!Number(n.unLockables.fromNum())},nativeOn:{click:function(i){t.doUnLock(e,Number(n.unLockables.fromNum()))}}},[t._v(t._s(t.$t("jie-ya")))])],1)])])})),i("redGreenBut",{nativeOn:{click:function(n){return t.doDraw(n)}}},[t._v(t._s(t.$t("ling-qu-shou-yi")))])],2)]):t._e()},s=[],o=(i("4160"),i("a9e3"),i("b680"),i("159b"),{data:function(){return{list:[],totalAward:0}},methods:{init:function(){var t=this;this.$contracts.LockMine.methods.getMyInfoDetail().call({from:this.$address},(function(n,i){console.log(i),t.list=[];var e=[t.$t("30-ri"),t.$t("90-ri"),t.$t("360-ri")];i.times.forEach((function(n,s){t.list.push({title:e[s],lockAmounts:i.lockAmounts[s].fromWei().toFixed(2).toNum(),drawedEarnings:i.drawedEarnings[s].fromWei().toFixed(2).toNum(),claimables:parseInt(i.claimables[s].fromWei()).toNum(),unLockables:parseInt(i.unLockables[s].fromWei()).toNum(),times:Number(n)?t.$toTime(n,"h:mm m/d y"):t.$t("zan-wu"),extendible:i.extendible[s]})})),t.$nextTick((function(){t.$emit("updateContentBg",!0)}))})),this.$contracts.LockMine.methods.getAwardInfo().call({from:this.$address},(function(n,i){t.totalAward=i.totalAward.fromWei()}))},doUnLock:function(t,n){var i=this;if(!n)return this.$toast.fail(this.$t("zan-bu-ke-jie-ya"));this.$contracts.LockMine.methods.doUnLock(t).send({from:this.$address}).on("transactionHash",(function(t){i.$loading()})).on("receipt",(function(t){i.$loading(),i.$nextTick((function(){i.$toast.success(i.$t("jie-ya-cheng-gong")),i.init()}))})).on("error",console.error)},doDraw:function(){var t=this;if(!Number(this.totalAward))return this.$toast.fail(this.$t("zan-wu-shou-yi"));this.$contracts.LockMine.methods.doDraw().send({from:this.$address}).on("transactionHash",(function(n){t.$loading()})).on("receipt",(function(n){t.$loading(),t.$nextTick((function(){t.$toast.success(t.$t("ling-qu-cheng-gong")),t.init()}))})).on("error",console.error)},doAddLockOnePeriod:function(t,n){var i=this;if(!n)return this.$toast.fail(this.$t("zan-bu-ke-fu-tou"));this.$contracts.LockMine.methods.doAddLockOnePeriod(t).send({from:this.$address}).on("transactionHash",(function(t){i.$loading()})).on("receipt",(function(t){i.$loading(),i.$nextTick((function(){i.$toast.success(i.$t("fu-tou-cheng-gong")),i.init()}))})).on("error",console.error)}},mounted:function(){this.$contracts&&this.init()}}),a=o,c=a,r=(i("6dda"),i("2877")),u=Object(r["a"])(c,e,s,!1,null,"22febaf8",null);n["default"]=u.exports},"5de2":function(t,n,i){"use strict";i.r(n);var e=function(){var t=this,n=t.$createElement,i=t._self._c||n;return i("section",{staticClass:"lockWarehouseMining"},[i("contentBg",{ref:"contentBg",staticClass:"contentBg"}),i("contentTitle",[i("div",{staticClass:"text"},[i("span",[t._v(t._s(t.$t("suo-cang-far-ji-ke-huo-de-wen-ding-shou-yi")))]),i("span",[t._v(t._s(t.$t("ding-qi-li-cai-suo-ding-zeng-chang")))])])]),"/lockWarehouseMining"==t.$route.path?i("div",{staticClass:"butBox"},[i("redGreenBut",{class:"dn"==t.$i18n.locale?"dnn":"",nativeOn:{click:function(n){return t.pushUrl("/myLock")}}},[t._v(t._s(t.$t("wo-de-suo-cang")))])],1):t._e(),"/lockWarehouseMining"==t.$route.path?i("div",{staticClass:"lockWarehouseMiningContent"},t._l(t.list,(function(n,e){return i("div",{key:e,staticClass:"list"},[i("div",{staticClass:"title"},[t._v(t._s(n.title))]),i("ul",[i("li",[i("span",[t._v("APY")]),i("span",[t._v(t._s(n.apys)+" %")])]),i("li",[i("span",[t._v(t._s(t.$t("jiang-li-zong-liang")))]),i("span",[t._v(t._s(t.$t("nian-hua-shou-yi")))])])]),i("ul",[i("li",[i("span",[t._v(t._s(t.$t("dang-qian-suo-cang-zong-liang")))]),i("span",[t._v(t._s(n.lockTotalAmounts)+" FAR")])]),i("li",[i("span",[t._v(t._s(t.$t("sheng-yu-suo-cang-shi-jian")))]),i("span",[t._v(t._s(n.remainingTime)+" "+t._s(t.$t("xiao-shi")))])]),i("li",[i("span",[t._v(t._s(t.$t("wo-de-suo-cang")))]),i("span",[t._v(t._s(n.lockAmounts)+" FAR")])]),i("li",[i("span",[t._v(t._s(t.$t("wo-de-shou-yi")))]),i("span",[t._v(t._s(n.earnings)+" FAR")])])]),i("p",[t._v(" "+t._s(t.$t("bei-zhu-yi-dan-can-jia-suo-cang-xu-deng-dao-suo-cang-jie-shu-cai-ke-yi-qu-hui-far-zhong-tu-bu-neng-qu-hui-far"))+" ")]),i("redGreenBut",{nativeOn:{click:function(i){return t.butClick(e,n.lockables)}}},[t._v(t._s(n.lockables&&Number(n.lockAmounts.fromNum())?t.$t("ji-xu-can-yu"):t.$t("can-yu-suo-cang")))])],1)})),0):t._e(),i("router-view",{on:{updateContentBg:t.updateContentBg}}),i("van-overlay",{attrs:{show:t.show},on:{click:function(n){t.show=!t.show}}},[i("div",{staticClass:"makeMoney",on:{click:function(t){t.stopPropagation()}}},[i("div",[i("div",[i("div",{staticClass:"title"},[t._v(" "+t._s(t.$t("suo-cang-zhuan-qu-far"))+" ")]),i("div",{staticClass:"input"},[i("span",[t._v(t._s(t.$t("suo-cang-far")))]),i("div",[i("input",{directives:[{name:"model",rawName:"v-model",value:t.amount,expression:"amount"}],attrs:{type:"text",placeholder:t.$t("cun-bi-shu-liang")},domProps:{value:t.amount},on:{input:function(n){n.target.composing||(t.amount=n.target.value)}}}),i("div",[i("span",[t._v("FAR")]),i("div"),i("span",{on:{click:function(n){t.amount=parseInt(t.balance.far.fromNum())}}},[t._v(t._s(t.$t("zui-da")))])])])]),i("span",[t._v(t._s(t.$t("qian-bao-ke-yong"))+" "+t._s(t.balance.far)+" FAR")]),i("p",[t._v(" "+t._s(t.$t("qing-que-bao-qian-bao-zhong-you-zu-gou-de-far-yi-que-bao-okexchain-lian-shang-jiao-yi-wan-cheng"))+" ")])]),i("div",{staticClass:"but"},[i("redGreenBut",{nativeOn:{click:function(n){return t.authorize(n)}}},[t._v(t._s(t.$t("shou-quan")))]),i("redGreenBut",{nativeOn:{click:function(n){return t.doLock(n)}}},[t._v(t._s(t.$t("que-ren")))])],1)])])])],1)},s=[],o=(i("4160"),i("a9e3"),i("b680"),i("d3b7"),i("25f0"),i("159b"),i("96cf"),i("1da1")),a=i("5530"),c={data:function(){return{show:!1,active:0,amount:"",farAuthorize:0,list:[],isRegister:""}},watch:{show:function(){this.amount=""}},computed:Object(a["a"])({},Vuex.mapState(["balance"])),methods:{init:function(){var t=this;this.show=!1,this.$contracts.Relation.methods.recommendInfo().call({from:this.$address},(function(n,i){var e=t.$web3.utils.hexToString(i.shotCode);t.isRegister=!!e.length})),this.$contracts.LockMine.methods.getMyInfos().call({from:this.$address},function(){var n=Object(o["a"])(regeneratorRuntime.mark((function n(i,e){var s,o;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!i){n.next=2;break}return n.abrupt("return");case 2:return console.log(e),t.list=[],s=[t.$t("30-ri-suo-cang-ji-hua"),t.$t("90-ri-suo-cang-ji-hua"),t.$t("360-ri-suo-cang-ji-hua")],n.next=7,t.$currentTime().then();case 7:o=n.sent,e.apys.forEach((function(n,i){t.list.push({title:s[i],apys:e.apys[i],earnings:e.earnings[i].fromWei().toFixed(6).toNum(),lockAmounts:parseInt(e.lockAmounts[i].fromWei()).toNum(),lockTotalAmounts:parseInt(e.lockTotalAmounts[i].fromWei()).toNum(),times:e.times[i],lockables:e.lockables[i]}),t.list[i].remainingTime=parseInt((t.list[i].times-o)/60/60)})),t.$nextTick((function(){t.$refs.contentBg.width=document.querySelector(".lockWarehouseMining").offsetWidth,t.$refs.contentBg.height=document.querySelector(".lockWarehouseMining").offsetHeight}));case 10:case"end":return n.stop()}}),n)})));return function(t,i){return n.apply(this,arguments)}}()),this.$contracts.FarToken.methods.allowance(this.$address,this.$contracts.LockMine._address).call({from:this.$address},(function(n,i){t.farAuthorize=i.fromWei()}))},butClick:function(t,n){if(!n)return this.$toast.fail(this.$t("suo-cang-shi-jian-jie-zhi"));this.show=!0,this.active=t},doLock:function(){var t=this,n=Number(this.amount),i=Number(this.balance.far.fromNum()),e=Number(this.farAuthorize);return n?n>i?this.$toast.fail(this.$t("yuebu-zu")):this.isRegister?n>e?this.$toast.fail(this.$t("shou-quanedu-bu-zu")):void this.$contracts.LockMine.methods.doLock(this.active,this.amount.toString().toWei()).send({from:this.$address}).on("transactionHash",(function(n){t.$loading()})).on("receipt",(function(n){t.$loading(),t.$nextTick((function(){t.$toast.success(t.$t("suo-cang-cheng-gong")),t.init()}))})).on("error",console.error):this.$toast.fail(this.$t("qing-xian-bang-ding-tui-jian-ren")):this.$toast.fail(this.$t("qing-shu-ru-cun-bi-shu-liang"))},authorize:function(){var t=this,n="1000000000".toWei();this.$contracts.FarToken.methods.approve(this.$contracts.LockMine._address,n).send({from:this.$address}).on("transactionHash",(function(n){t.$loading()})).on("receipt",(function(i){t.$loading(),t.$nextTick((function(){t.farAuthorize=n,t.$toast.success(t.$t("shou-quan-cheng-gong"))}))})).on("error",console.error)},pushUrl:function(t){this.$router.push(t)},updateContentBg:function(){var t=this;this.$nextTick((function(){t.$refs.contentBg.width=document.querySelector(".lockWarehouseMining").offsetWidth,t.$refs.contentBg.height=document.querySelector(".lockWarehouseMining").offsetHeight}))}},mounted:function(){this.$contracts&&this.init()}},r=c,u=r,l=(i("7f95"),i("54a6"),i("2877")),d=Object(l["a"])(u,e,s,!1,null,"7316a038",null);n["default"]=d.exports},"6dda":function(t,n,i){"use strict";i("7614")},7614:function(t,n,i){},"7f95":function(t,n,i){"use strict";i("c9bc")},"8e8e":function(t,n,i){"use strict";i("c697")},c697:function(t,n,i){},c9bc:function(t,n,i){}}]);